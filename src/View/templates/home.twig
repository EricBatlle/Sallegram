{% extends "base.twig" %}
{% block links %}
    {{ parent() }}
{% endblock %}

{% block content %}
    <h1>Home</h1>
    <div id="top5">
    <h2>Top5</h2>

    {% for i in 1..top5|length if top5|length > 0%}
        {% set foo = 0 %}
        <div>
            <img src="assets/uploads/{{ top5[i-1].img_path }}" width="200" height="200">
            <p>Title <a href="/photo/{{ top5[i-1].id }}">{{ top5[i-1].title }}</a></p>
            <p>UserName <a href="/profile/{{ top5[i-1].user_id }}">{{ top5[i-1].username }}</a></p>
            <p>Date {{ top5[i-1].created_at }}</p>
            <p>Likes {{ top5[i-1].likes }}</p>
            {% if app.session.has('id') %}
                {% for j in 1..liked|length if liked|length > 0 and foo == 0 %}
                    {% if top5[i-1].id == liked[j-1].id %}
                        <form id="{{ top5[i-1].id }}" class="like_form" name="Dislike" action="" METHOD="POST" enctype="multipart/form-data">
                        <input id="{{ top5[i-1].id }}" type="submit" value="Dislike">
                        {% set foo = 1 %}

                    {% endif %}
                {% endfor %}
                {% if foo == 0 %}
                    <form id="{{ top5[i-1].id }}" class="like_form" name="Like" action="" METHOD="POST" enctype="multipart/form-data">
                    <input id="{{ top5[i-1].id }}" type="submit" value="Like">
                {% endif %}
            </form>
            {% endif %}
            <p>Visits {{ top5[i-1].visits }}</p>
        </div>
        {% if app.session.has('id') %}
            {#ToDo: Comment is now not saved#}
            {#<form action="/addComment/{{ app.session.get('id') }}" METHOD="POST" enctype="multipart/form-data">#}
            <form  id="{{ top5[i-1].id }}" class="comment_form" action="" METHOD="POST" enctype="multipart/form-data">
                <textarea id="{{ top5[i-1].id }}" name="comment" class="comment"></textarea>
                <input type="submit">
            </form>
        {% endif %}
    {% endfor %}
    </div>
    <form  id="0" class="more_top5_form"  action="" METHOD="POST" enctype="multipart/form-data">
        {#<input id="{{ image.id }}" class="more_comment_input" type="submit" value="Más comentarios">#}
        <input id="" class="more_top5_input" type="submit" value="Más imágenes">
    </form>

    <div>
    <h2>Last5</h2>
    {% for i in 1..last5|length if last5|length > 0%}
        <div>
            <h3>Img {{ last5[i-1].img_path }}</h3>
            <img src="assets/uploads/{{ last5[i-1].img_path }}">
            <p>Title <a href="/photo/{{ last5[i-1].id }}">{{ last5[i-1].title }}</a></p>
            <p>UserName <a href="/profile/{{ last5[i-1].user_id }}">{{ last5[i-1].username }}</a></p>
            <p>Date {{ last5[i-1].created_at }}</p>
            <p>Likes {{ last5[i-1].likes }}</p>
            <p>Visits {{ last5[i-1].visits }}</p>
        </div>
    {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script src="{{ asset('/comment.js','js') }}" type="text/javascript" charset="utf-8"></script>
    <script src="{{ asset('/like_home.js','js') }}" type="text/javascript" charset="utf-8"></script>
    <script src="{{ asset('/moreTop5_v6.js','js') }}" type="text/javascript" charset="utf-8"></script>
{% endblock %}